# ==============================================================================
# MNEMOSYNE PRODUCTION ENVIRONMENT VARIABLES
# ==============================================================================
#
# IMPORTANT:
# 1. Copy this file to .env.production
# 2. Fill in all the values (DO NOT commit .env.production to git!)
# 3. Use strong, randomly generated passwords
# 4. Keep this file secure and never share it
#
# Generate secure random values:
#   openssl rand -hex 32
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
# ==============================================================================

# ------------------------------------------------------------------------------
# Application Settings
# ------------------------------------------------------------------------------
APP_NAME=Mnemosyne
APP_VERSION=0.1.0
ENVIRONMENT=production
DOMAIN=api.yourdomain.com

# Security (CRITICAL: Change these!)
DEBUG=false
API_RELOAD=false
SECRET_KEY=CHANGE_ME_TO_RANDOM_32_BYTE_HEX
API_KEY_PREFIX=mn_prod_

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------
POSTGRES_USER=mnemosyne
POSTGRES_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD
POSTGRES_DB=mnemosyne
DATABASE_URL=postgresql://mnemosyne:CHANGE_ME_TO_STRONG_PASSWORD@postgres:5432/mnemosyne

# ------------------------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------------------------
REDIS_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD
REDIS_URL=redis://:CHANGE_ME_TO_STRONG_PASSWORD@redis:6379/0

# ------------------------------------------------------------------------------
# API Server Configuration
# ------------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=["https://yourdomain.com","https://app.yourdomain.com"]

# ------------------------------------------------------------------------------
# OpenAI Configuration
# ------------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key-here
EMBEDDING_MODEL=text-embedding-3-large
CHAT_MODEL=gpt-4o-mini

# ------------------------------------------------------------------------------
# Storage
# ------------------------------------------------------------------------------
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE=104857600

# ------------------------------------------------------------------------------
# Document Processing
# ------------------------------------------------------------------------------
CHUNK_SIZE=512
CHUNK_OVERLAP=128

# Video Processing
VIDEO_FFMPEG_PATH=ffmpeg
VIDEO_FFPROBE_PATH=ffprobe
VIDEO_TEMP_DIR=/tmp/mnemosyne_video
VIDEO_MAX_DURATION=3600

# Speech-to-Text
STT_SERVICE=whisper-1
STT_SERVICE_API_KEY=
STT_LOCAL_ENABLED=false

# ------------------------------------------------------------------------------
# Reranking (Improves retrieval accuracy by 15-25%)
# ------------------------------------------------------------------------------
RERANK_ENABLED=true
RERANK_PROVIDER=flashrank  # flashrank, cohere, jina, voyage, mixedbread
RERANK_MODEL=ms-marco-MultiBERT-L-12  # Provider-specific model
RERANK_TOP_K=10
RERANK_API_KEY=  # Required for API-based providers (not flashrank)

# ------------------------------------------------------------------------------
# LightRAG (Graph-based RAG - CRITICAL for architecture!)
# ------------------------------------------------------------------------------
LIGHTRAG_ENABLED=true
LIGHTRAG_WORKING_DIR=/app/data/lightrag
LIGHTRAG_CHUNK_SIZE=512
LIGHTRAG_CHUNK_OVERLAP=128
LIGHTRAG_TOP_K=20
LIGHTRAG_CHUNK_TOP_K=10
LIGHTRAG_MAX_ENTITY_TOKENS=6000
LIGHTRAG_MAX_RELATION_TOKENS=8000
LIGHTRAG_MAX_TOKENS=30000
LIGHTRAG_DEFAULT_MODE=hybrid

# ------------------------------------------------------------------------------
# Rate Limiting
# ------------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_CHAT=10/minute
RATE_LIMIT_RETRIEVAL=100/minute
RATE_LIMIT_UPLOAD=20/hour

# ------------------------------------------------------------------------------
# Monitoring
# ------------------------------------------------------------------------------
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# ------------------------------------------------------------------------------
# Backup
# ------------------------------------------------------------------------------
BACKUP_RETENTION_DAYS=7
